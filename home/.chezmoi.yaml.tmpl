{{- /* initialize the variable defaults */ -}}
{{- $name := "Chris Burnham" -}}

{{/* feature flags */}}
{{- $personal    := false -}}{{/* true if this machine should have personal config/secrets */}}
{{- $work        := false -}}{{/* true if this machine should have work config/secrets */}}
{{- $devops      := false -}}{{/* true if this machine should have devops utilities */}}
{{- "" -}}

{{- if not stdinIsATTY -}}
{{-   writeToStdout "ðŸ›‘ Error: Container environment detected. Exiting.\n" -}}
{{-   exit 1 -}}

{{- else -}}

{{-   if hasKey . "name" -}}
{{-     $orig_name := .name -}}
{{-     $name = promptString "Name" $orig_name -}}
{{-   else -}}
{{-     $name = promptString "Name" $name -}}
{{-   end -}}

{{-   if hasKey . "personal" -}}
{{-     $orig_personal := .personal -}}
{{-     $personal = promptBool "Enable personal configs/secrets [y|n]" $orig_personal -}}
{{-   else -}}
{{-     $personal = promptBool "Enable personal configs/secrets [y|n]" $personal -}}
{{-   end -}}

{{-   if hasKey . "work" -}}
{{-     $orig_work := .work -}}
{{-     $work = promptBool "Enable work configs/secrets [y|n]" $orig_work -}}
{{-   else -}}
{{-     $work = promptBool "Enable work configs/secrets [y|n]" $work -}}
{{-   end -}}

{{-   if hasKey . "devops" -}}
{{-     $orig_devops := .devops -}}
{{-     $devops = promptBool "Enable devops utilities [y|n]" $orig_devops -}}
{{-   else -}}
{{-     $devops = promptBool "Enable devops utilities [y|n]" $devops -}}
{{-   end -}}

{{-   writeToStdout "ðŸ’¡ Tip: you can re-enter your data with `chezmoi init --data=false`.\n" -}}

{{- end -}}

sourceDir: {{ .chezmoi.sourceDir | quote }}

data:
  name: {{ $name | quote }}
  personal: {{ $personal }}
  work: {{ $work }}
  devops: {{ $devops }}
