#!/usr/bin/env bash

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#   @author         :   Chris Burnham
#   @file           :
#   @description    :
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# --------------------------------------------------------------------------------------------------
#   @description    :   Get script libraries
# --------------------------------------------------------------------------------------------------
{{ template "script-library" }}
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
#   @description    :   Pre-flight
# --------------------------------------------------------------------------------------------------
info "[ðŸš›        Transmit] Setting log level to debug."
LOG_LEVEL=7

{{ if eq .osid "darwin" }}

  {{ if .workstation }}
debug "[ðŸš›        Transmit] Verifying installation."

if ! check_macos_app "Transmit.app"; then
  info "[ðŸš›        Transmit] Application is not installed."
  exit 0

else
  debug "[ðŸš›        Transmit] Application is installed."
  info "[ðŸš›        Transmit] Closing Transmit, to prevent it from overriding changes."
  osascript -e 'tell application "Transmit" to quit'

fi

  {{ else }}
debug "[ðŸš›        Transmit] Skipping. Does not apply to this Chezmoi profile."
exit 0

  {{ end }}

{{ else }}
debug "[ðŸš›        Transmit] Skipping. Does not apply to this operating system."
exit 0

{{ end }}
# ==================================================================================================

info "[ðŸš›        Transmit] Configuration complete."
